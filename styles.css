* { box-sizing: border-box; }
html, body, #app { height: 100%; margin: 0; }

/* ===== å¸ƒå±€éª¨æž¶ ===== */
#app {
  display: grid;
  grid-template-columns: 1fr;
  grid-template-rows: 1fr 180px;
  grid-template-areas:
    "workspace"
    "controlBar";
  position: relative;
}

/* ===== ä¾§è¾¹æ ï¼ˆæµ®çª—ï¼‰===== */
#sidebar {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 180px;
  background: #fff;
  border-right: 1px solid #ddd;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  transition: width 0.3s ease;
  z-index: 10;
}
#sidebar.open { width: 260px; }
#sidebar:not(.open) { width: 50px; }

.sidebar-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px;
  border-bottom: 1px solid #eee;
}
#sidebar:not(.open) .sidebar-header span { display: none; }

.sidebar-actions {
  padding: 8px;
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}
#sidebar.open .sidebar-actions button {
  flex: 1; font-size: 14px;
}
#sidebar:not(.open) .sidebar-actions button {
  width: 32px; height: 32px; padding: 0; font-size: 0;
}
#btnNew::before { content: "âž•"; font-size: 18px; }
#btnRefreshPorts::before { content: "ðŸ”„"; font-size: 18px; }

#panelList {
  list-style: none;
  margin: 0;
  padding: 0 8px 12px 8px;
  overflow: auto;
  flex: 1;
}
#panelList li {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 4px;
  border-bottom: 1px dashed #eee;
}
#panelList li .actions button { margin-left: 6px; }
#sidebar:not(.open) #panelList { display: none; }

/* ===== å·¥ä½œåŒº ===== */
#workspace {
  grid-area: workspace;
  position: relative;
  background: #fafafa;
  overflow: hidden;
}
#panes { position: absolute; inset: 0; }

.pane {
  position: absolute;
  width: 420px; height: 240px;
  min-width: 360px;
  background: #fff; border: 1px solid #ddd; border-radius: 8px;
  box-shadow: 0 3px 12px rgba(0,0,0,.06);
  overflow: hidden;
}
.pane .title {
  height: 36px; display: flex; align-items: center; justify-content: space-between;
  padding: 0 8px; background: #f3f3f3; cursor: grab; user-select: none; border-bottom: 1px solid #eaeaea;
}
.pane .title .name { font-weight: 600; }
.pane .title .btns button { margin-left: 6px; }
.pane .body {
  height: calc(100% - 36px);
  overflow: auto;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  padding: 8px;
  white-space: pre-wrap;
  line-height: 1.2;
}
.pane .resizer {
  position: absolute; width: 12px; height: 12px; right: 0; bottom: 0; cursor: se-resize; background: transparent;
}
.pane.active { outline: 2px solid #4A90E2; }
.pane.hidden { display: none; }

/* ===== åº•éƒ¨åŠŸèƒ½åŒº ===== */
#bottomPanel {
  grid-area: controlBar;
  display: flex;
  height: 180px;
  border-top: 1px solid #ddd;
  background: #fff;
}

/* å·¦ä¾§åž‚ç›´å¯¼èˆª */
#bottomNav {
  width: 50px;
  border-right: 1px solid #ddd;
  display: flex;
  flex-direction: column;
}
#bottomNav button {
  flex: 1; border: none; border-bottom: 1px solid #eee; background: #f8f8f8; cursor: pointer;
}
#bottomNav button:hover { background: #e6e6e6; }
#bottomNav button.active { background: #4A90E2; color: #fff; font-weight: 700; }

/* å³ä¾§å†…å®¹åŒºï¼ˆæ³¨æ„ï¼šä¸å‡ºçŽ°æ»šåŠ¨æ¡ï¼‰ */
#bottomContent {
  flex: 1;
  padding: 10px 10px 14px;     /* ðŸ‘ˆ è¿™é‡Œä¸‹å†…è¾¹è·æ›´å¤§ï¼Œä¿è¯åº•éƒ¨ç•™ç™½ */
  overflow: hidden;            /* ä¸å‡ºçŽ°æ»šåŠ¨æ¡ */
  display: flex;
  flex-direction: column;
}

#bottomContent .row {
  display: flex; align-items: center; gap: 8px; margin-bottom: 8px;
}

#toggleSidebar { width: 32px; height: 28px; }

dialog { border: 1px solid #ddd; border-radius: 8px; padding: 12px 12px 16px; }

/* ===== å‘½ä»¤é¡µ ===== */
.cmd-layout {
  display: grid;
  grid-template-columns: 1fr 120px; /* å·¦ï¼šç½‘æ ¼ï¼›å³ï¼šå·¥å…·æ  */
  gap: 10px;
  height: 100%;
  padding-bottom: 12px;      /* ðŸ‘ˆ æ•´ä½“åº•éƒ¨å†ç•™ç™½ */
  box-sizing: border-box;
}

/* ä½¿ç”¨ flexï¼Œå›ºå®šè¡Œé«˜ã€å®½åº¦è‡ªé€‚åº” */
.cmd-grid {
  height: calc(100% - 0px);  /* ä¸Žä¸Šé¢çš„ padding é…åˆï¼Œç¡®ä¿å¯è§ç©ºç™½ */
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 8px 8px 16px;     /* ðŸ‘ˆ ç½‘æ ¼è‡ªèº«ä¹Ÿæœ‰ä¸‹å†…è¾¹è· */
  overflow: hidden;          /* ä¸å‡ºçŽ°æ»šåŠ¨æ¡ */
  align-content: flex-start; /* ä»Žä¸Šå¾€ä¸‹æŽ’ */
}

/* å¡ç‰‡ï¼šå›ºå®šé«˜åº¦ï¼Œå®½åº¦ flex */
.cmd-card {
  display: flex;
  align-items: center;
  height: 31px;              /* ðŸ‘ˆ å›ºå®šé«˜åº¦æ›´çª„ */
  flex: 1 1 300px;           /* æœ€å° ~300pxï¼Œå®½åº¦è‡ªé€‚åº” */
  max-width: 420px;          /* é¿å…å¤ªå®½ */
  border: 1px solid #ddd;
  border-radius: 6px;
  padding: 4px;
  background: #fff;
  font-size: 13px;
}
/* è®©æŒ‰é’®é‡Œçš„æ–‡å­—çœŸæ­£å‡ ä½•å±…ä¸­ */
.cmd-card button.send {
  /* å°ºå¯¸ */
  height: 100%;
  flex: 0 0 80px;

  /* ç”¨ flex å±…ä¸­ï¼Œé¿å…å­—ä½“åº¦é‡å¸¦æ¥çš„â€œçœ‹èµ·æ¥ä¸å±…ä¸­â€ */
  display: inline-flex;
  align-items: center;
  justify-content: center;

  /* åŽ»æŽ‰ä¸Šä¸‹ paddingï¼Œé¿å…å†å½±å“è§†è§‰é‡å¿ƒ */
  padding: 0 10px;

  /* è¡Œç›’é«˜åº¦ä¸å†å‚ä¸Žåž‚ç›´å¯¹é½ */
  line-height: 1;

  font-size: 13px;
}

/* ï¼ˆå¯é€‰ï¼‰ç»Ÿä¸€ UI å­—ä½“ï¼ŒCJK åº¦é‡æ›´ä¸€è‡´ */
body, button, input, select {
  font-family: "Microsoft YaHei UI", "Microsoft YaHei",
               "PingFang SC", "Noto Sans SC", "Segoe UI",
               Arial, sans-serif;
}

.cmd-card .preview {
  flex: 1;
  height: 100%;
  border: 1px dashed #ddd;
  border-radius: 6px;
  padding: 0 6px;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  font-size: 13px;
  cursor: pointer;
}

/* å ä½å¡ç‰‡ï¼šå ä½ç½®ä½†ä¸å¯è§ï¼Œç”¨äºŽä¸è¶³ä¸€é¡µæ—¶å¯¹é½ */
.cmd-card.placeholder { visibility: hidden; }

.cmd-tools {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 8px 8px 16px;  /* é¡¶éƒ¨ 8pxï¼Œä¸Ž .cmd-grid ä¸€è‡´ */
}
.cmd-tools .pager { display: flex; justify-content: center; gap: 6px; }
.cmd-tools .repeat { display: flex; align-items: center; gap: 6px; }
.cmd-tools input[type="number"] { width: 80px; }
.cmd-table-wrap { max-height: 420px; overflow: auto; margin: 8px 0; }
.cmd-table { width: 720px; border-collapse: collapse; }
.cmd-table th, .cmd-table td { border: 1px solid #e6e6e6; padding: 6px; }
.cmd-edit-actions { display: flex; gap: 8px; }

/* è‡ªåŠ¨å‘é€çŠ¶æ€ï¼šè“è‰²å‘å…‰è¾¹æ¡† */
.cmd-card.auto {
  border-color: #3b82f6;
  box-shadow: 0 0 0 2px rgba(59,130,246,.35), 0 0 10px rgba(59,130,246,.25);
  animation: pulse-blue 1.2s ease-in-out infinite;
}

@keyframes pulse-blue {
  0%   { box-shadow: 0 0 0 2px rgba(59,130,246,.35), 0 0 8px  rgba(59,130,246,.20); }
  50%  { box-shadow: 0 0 0 2px rgba(59,130,246,.75), 0 0 16px rgba(59,130,246,.45); }
  100% { box-shadow: 0 0 0 2px rgba(59,130,246,.35), 0 0 8px  rgba(59,130,246,.20); }
}

/* ç»Ÿä¸€ About é¡µä¸Žå…¶ä»–é¡µçš„ä¸Šè¾¹è· */
#page-about h3 {
  margin-top: 0;
}
/* è„šæœ¬å·¥ä½œå®¤å¸ƒå±€ */
.script-layout {
  width: 920px; height: 520px;
  display: grid; grid-template-columns: 1fr 280px; gap: 12px;
}
#scriptEditor {
  width: 100%; height: 100%;
  font-family: ui-monospace, Menlo, Consolas, monospace;
  font-size: 13px; line-height: 1.4;
  border: 1px solid #ddd; border-radius: 8px; padding: 10px;
  resize: none;
  overflow: auto;
}
.script-side {
  display: flex; flex-direction: column;
}
.script-row { display: flex; gap: 8px; margin-bottom: 8px; }
#scriptName { flex: 1; }
.script-list-wrap {
  border: 1px solid #eee; border-radius: 8px; padding: 8px; height: 280px; overflow: auto;
}
#scriptList { list-style: none; margin: 0; padding: 0; }
#scriptList li {
  padding: 6px 8px; border-radius: 6px; cursor: pointer;
}
#scriptList li:hover { background: #f3f6ff; }
.script-actions { display: flex; gap: 8px; justify-content: flex-end; margin-top: 12px; }
.hint { font-size: 12px; color: #666; margin-bottom: 6px; word-break: break-all; }
/* é¡¶éƒ¨ä¸‰æŒ‰é’®ä¸€è¡Œæ˜¾ç¤º */
.script-row {
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
}
.script-row > button {
  flex: 1;
}
.pane.dragging { cursor: grabbing !important; user-select: none; }
.pane.dragging .title { user-select: none; }
.pane.dragging .btns button { pointer-events: none; }
.pane { z-index: 1; }
.pane.active,
.pane.dragging { z-index: 9; }